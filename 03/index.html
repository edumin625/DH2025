<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>'나우 유 씨 미 3' 감상평 분석 대시보드</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.7.1/dist/chart.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Warm Neutrals (bg-gray-50, text-gray-800) with Cool Accents (blue-600) -->
    <!-- Application Structure Plan: 4-탭 대시보드 구조 (1.대시보드, 2.감성 분석, 3.키워드, 4.전체 리뷰)를 채택했습니다. 이 구조는 사용자가 '무엇' (정량적 요약), '왜' (정성적 이유), '주요 주제' (키워드), '원본 데이터' (전체 리뷰)로 이어지는 논리적 흐름을 따라 정보를 쉽게 탐색하고 합성할 수 있도록 설계되었습니다. 단일 스크롤 페이지보다 인지 부하가 적고, 사용자가 원하는 정보에 능동적으로 접근할 수 있어 사용 편의성이 높습니다. -->
    <!-- Visualization & Content Choices: 1. 평균 평점(숫자): 핵심 성과 지표(KPI)를 즉각적으로 전달. 2. 감성 분포(도넛 차트): 긍/중/부 비율을 한눈에 파악. 3. 별점 분포(막대 차트): '호불호'가 갈리는 양상을 시각적으로 명확히 표시. 4. 정성 분석(3단 카드): 긍/중/부의 핵심 '이유'를 텍스트로 요약, 스캔하기 쉬움. 5. 키워드 빈도(수평 막대 차트): 자주 언급되는 주제 비교에 용이. 6. 전체 리뷰(필터/검색 테이블): 사용자가 원본 데이터를 직접 탐색할 수 있는 '드릴다운' 기능 제공. 모든 차트는 Chart.js(Canvas)를 사용함. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Noto Sans KR', sans-serif;
            background-color: #f8f9fa;
            color: #343a40;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 350px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 350px;
                max-height: 400px;
            }
        }
        [data-tab-content] {
            display: none;
        }
        [data-tab-content].active {
            display: block;
        }
        .nav-button {
            transition: all 0.3s ease;
        }
        .nav-button.active {
            background-color: #2563eb;
            color: white;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }
        .nav-button:not(.active):hover {
            background-color: #e9ecef;
        }
        .kpi-card {
            background-color: white;
            border-radius: 0.75rem;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05), 0 2px 4px -1px rgba(0, 0, 0, 0.03);
            padding: 1.5rem;
            text-align: center;
        }
        .sentiment-card {
            background-color: white;
            border-radius: 0.75rem;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05), 0 2px 4px -1px rgba(0, 0, 0, 0.03);
            padding: 1.5rem;
            height: 100%;
        }
    </style>
</head>
<body class="antialiased">

    <div class="container mx-auto p-4 md:p-8 max-w-7xl">

        <header class="mb-8">
            <h1 class="text-3xl md:text-4xl font-bold text-center text-gray-900">'나우 유 씨 미 3' 감상평 분석</h1>
            <p class="text-center text-lg text-gray-600 mt-2">대화형 대시보드 (데이터: 50개 리뷰)</p>
        </header>

        <nav class="flex flex-wrap justify-center gap-2 md:gap-4 mb-8">
            <button data-tab-target="#dashboard" class="nav-button active font-medium py-2 px-4 rounded-full shadow-sm bg-white border border-gray-200 text-gray-700">
                요약 대시보드
            </button>
            <button data-tab-target="#sentiment-analysis" class="nav-button font-medium py-2 px-4 rounded-full shadow-sm bg-white border border-gray-200 text-gray-700">
                주요 감성 분석
            </button>
            <button data-tab-target="#keyword-analysis" class="nav-button font-medium py-2 px-4 rounded-full shadow-sm bg-white border border-gray-200 text-gray-700">
                키워드 빈도
            </button>
            <button data-tab-target="#all-reviews" class="nav-button font-medium py-2 px-4 rounded-full shadow-sm bg-white border border-gray-200 text-gray-700">
                전체 감상평 보기
            </button>
            <a href="topic.html" class="font-medium py-2 px-4 rounded-full shadow-sm bg-red-600 text-white hover:bg-red-700" style="transition: all 0.3s ease;">
                토픽 모델링분석
            </a>
        </nav>

        <main>
            <section id="dashboard" data-tab-content class="active">
                <p class="text-center text-gray-700 mb-8 max-w-3xl mx-auto">
                    영화에 대한 전반적인 반응을 핵심 지표와 차트로 요약했습니다. 평균 평점, 긍정/부정 비율, 그리고 전체 별점 분포를 통해 '호불호가 명확히 갈리는' 경향을 한눈에 확인할 수 있습니다.
                </p>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                    <div class="kpi-card md:col-span-1">
                        <h3 class="text-lg font-semibold text-gray-500 mb-2">전체 평균 별점</h3>
                        <p class="text-5xl font-bold text-blue-600">6.52<span class="text-3xl text-gray-400">/10</span></p>
                    </div>
                    <div class="kpi-card md:col-span-2">
                        <h3 class="text-lg font-semibold text-gray-500 mb-2">감성 분포 (50개 리뷰)</h3>
                        <div class="chart-container" style="height: 150px; max-height: 150px;">
                            <canvas id="sentimentDoughnutChart"></canvas>
                        </div>
                    </div>
                </div>
                <div class="bg-white rounded-xl shadow-sm p-4 md:p-6">
                    <h3 class="text-xl font-bold text-gray-800 text-center mb-4">전체 별점 분포</h3>
                    <p class="text-center text-gray-600 mb-4 text-sm">긍정(10점)과 부정(1-4점)에 응답이 몰려있는 것을 볼 수 있습니다.</p>
                    <div class="chart-container" style="max-width: 1000px;">
                        <canvas id="ratingDistributionBarChart"></canvas>
                    </div>
                </div>
            </section>

            <section id="sentiment-analysis" data-tab-content>
                <p class="text-center text-gray-700 mb-8 max-w-3xl mx-auto">
                    관람객들이 왜 그렇게 평가했는지 정성적인 이유를 분석했습니다. 긍정, 중립, 부정 평가의 핵심적인 의견들을 요약하여 각 그룹의 주요 반응을 파악할 수 있습니다.
                </p>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                    <div class="sentiment-card border-t-4 border-green-500">
                        <h3 class="text-2xl font-bold text-green-600 mb-4">👍 긍정적 감성 (8-10점)</h3>
                        <ul class="space-y-3 list-disc list-inside text-gray-700">
                            <li><strong>오랜만의 귀환:</strong> 9년 만에 돌아온 시리즈와 '호스맨' 원년 멤버들을 다시 볼 수 있어 반갑다는 의견이 많았습니다.</li>
                            <li><strong>배우/볼거리:</strong> 배우들의 케미스트리가 좋고, 화려한 마술 쇼 등 볼거리가 풍성하다는 점을 높이 평가했습니다.</li>
                            <li><strong>오락성:</strong> "보는 내내 즐겁다", "유쾌하다" 등 복잡한 생각 없이 즐길 수 있는 킬링타임용 오락 영화로 만족한다는 평가입니다.</li>
                        </ul>
                    </div>
                    <div class="sentiment-card border-t-4 border-gray-400">
                        <h3 class="text-2xl font-bold text-gray-600 mb-4">😐 중립적 감성 (6-7점)</h3>
                        <ul class="space-y-3 list-disc list-inside text-gray-700">
                            <li><strong>'딱 킬링타임용':</strong> "기대 안 하고 보면 볼 만하다"는 의견이 지배적이며, 시간 보내기용으로는 적절했으나 그 이상은 아니라는 평가입니다.</li>
                            <li><strong>전작 대비 아쉬움:</strong> 1편, 2편에 비해 신선함이나 재미가 떨어지며, 전체적인 흐름이 비슷해서 아쉽다는 의견이 있었습니다.</li>
                            <li><strong>가벼워진 스케일:</strong> 연출이 가벼워지고 마술 트릭의 스케일이 작아졌다는 지적이 있습니다.</li>
                        </ul>
                    </div>
                    <div class="sentiment-card border-t-4 border-red-500">
                        <h3 class="text-2xl font-bold text-red-600 mb-4">👎 부정적 감성 (1-5점)</h3>
                        <ul class="space-y-3 list-disc list-inside text-gray-700">
                            <li><strong>무리한 세대교체:</strong> "어줍잖은 세대교체", "신삥 데뷔 무대" 등 새로운 캐릭터의 등장을 매우 부정적으로 평가했습니다.</li>
                            <li><strong>기존 캐릭터 홀대:</strong> (핵심 이슈) 신규 캐릭터가 기존 '호스맨' 멤버들을 하대하고 존중하지 않는 듯한 연출이 큰 불쾌감을 유발했습니다. (긍정 평가자도 지적)</li>
                            <li><strong>연출 문제:</strong> 연출이 "올드하고 촌스럽다"는 비판과, 영화의 정체성인 '마술'보다 다른 요소가 부각된 점에 불만을 표했습니다.</li>
                        </ul>
                    </div>
                </div>
            </section>

            <section id="keyword-analysis" data-tab-content>
                <p class="text-center text-gray-700 mb-8 max-w-3xl mx-auto">
                    50개의 감상평에서 가장 자주 언급된 키워드와 주제입니다. 관람객들이 어떤 주제에 집중했는지 파악할 수 있으며, '재미'에 대한 상반된 평가와 '세대교체'에 대한 부정적 언급이 눈에 띕니다.
                </p>
                <div class="bg-white rounded-xl shadow-sm p-4 md:p-6">
                    <h3 class="text-xl font-bold text-gray-800 text-center mb-4">주요 키워드 빈도 (상위 6개)</h3>
                    <div class="chart-container" style="max-width: 1000px;">
                        <canvas id="keywordBarChart"></canvas>
                    </div>
                </div>
            </section>

            <section id="all-reviews" data-tab-content>
                <p class="text-center text-gray-700 mb-8 max-w-3xl mx-auto">
                    수집된 50개의 원본 감상평 전체 목록입니다. 감성별로 필터링하거나 특정 단어를 검색하여 사용자가 남긴 생생한 의견을 직접 확인할 수 있습니다.
                </p>
                <div class="bg-white rounded-xl shadow-sm p-4 md:p-6">
                    <div class="flex flex-col md:flex-row gap-4 mb-6">
                        <div class="flex-1">
                            <label for="sentiment-filter" class="block text-sm font-medium text-gray-700 mb-1">감성별 필터</label>
                            <select id="sentiment-filter" class="w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500">
                                <option value="all">전체 보기</option>
                                <option value="positive">긍정 (8-10점)</option>
                                <option value="neutral">중립 (6-7점)</option>
                                <option value="negative">부정 (1-5점)</option>
                            </select>
                        </div>
                        <div class="flex-1">
                            <label for="search-input" class="block text-sm font-medium text-gray-700 mb-1">감상평 내용 검색</label>
                            <input type="text" id="search-input" placeholder="예: '세대교체', '재밌게'" class="w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500">
                        </div>
                    </div>
                    
                    <div class="overflow-x-auto">
                        <table class="min-w-full divide-y divide-gray-200">
                            <thead class="bg-gray-100">
                                <tr>
                                    <th scope="col" class="px-4 py-3 text-left text-xs font-bold text-gray-600 uppercase tracking-wider w-1/12">별점</th>
                                    <th scope="col" class="px-4 py-3 text-left text-xs font-bold text-gray-600 uppercase tracking-wider w-6/12">감상평</th>
                                    <th scope="col" class="px-4 py-3 text-left text-xs font-bold text-gray-600 uppercase tracking-wider w-2/12">작성자</th>
                                    <th scope="col" class="px-4 py-3 text-left text-xs font-bold text-gray-600 uppercase tracking-wider w-3/12">작성일</th>
                                </tr>
                            </thead>
                            <tbody id="reviews-table-body" class="bg-white divide-y divide-gray-200">
                            </tbody>
                        </table>
                    </div>
                    <p id="no-results" class="text-center text-gray-500 py-8 hidden">검색 결과가 없습니다.</p>
                </div>
            </section>
        </main>
    </div>

    <script>
        const allReviewsData = [
            { score: 1, text: "스포일러가 포함된 감상평입니다.", user: "busa****", date: "2025.11.18. 15:37" },
            { score: 9, text: "보는 내내 즐거운 작품배우들의 케미가 좋아요", user: "shin****", date: "2025.11.18. 15:35" },
            { score: 8, text: "2편 이후 9년이란 시간이 지나서인가 더 이상 그때처럼 놀랍지는 않지만 오랫만에 다시 모인 호스맨들을 극장에서 만나볼 수 있던 것 만으로도 돈과 시간이 아깝지 않았다.", user: "cine****", date: "2025.11.18. 14:49" },
            { score: 7, text: "기대안하고 봤는데 볼만함", user: "tjrg****", date: "2025.11.18. 14:14" },
            { score: 8, text: "오랫만의 호스맨 좋았어요.신마술사+구마술사+복수극... 너무 많이 섞어놔서 어지러웠지만 볼거리는 확실하네요.", user: "ksy2****", date: "2025.11.18. 13:04" },
            { score: 6, text: "나쁘지는 않은데 그렇다고 크게 재밌지도 않아서 조금 아쉽네요", user: "htwe****", date: "2025.11.18. 12:21" },
            { score: 6, text: "아직까지는 1편이 제일 낫고 그 다음 2편.. 3편이 재미는 제일 떨어지네요", user: "bles****", date: "2025.11.18. 12:20" },
            { score: 6, text: "소소하네요. 2편과 대동소이합니다. 큰 재미는 없는..", user: "kine****", date: "2025.11.18. 12:20" },
            { score: 10, text: "킬링타임용 킬링타임용", user: "hchc****", date: "2025.11.18. 12:18" },
            { score: 8, text: "재밌게 봤어요.. 괜찮았음 좋네요", user: "lost****", date: "2025.11.18. 12:17" },
            { score: 7, text: "애송이 마술사들과 트릭의 스케일은 작아졌다 하지만 모두 모인 호스맨들이 반갑고 여전히 유효한 매직쇼.", user: "khoj****", date: "2025.11.18. 12:16" },
            { score: 6, text: "아일라 피셔 돌아와서 좋긴한데 뭔가 참...너무 가벼워진듯한 연출...걍 그랬어요", user: "snow****", date: "2025.11.18. 12:09" },
            { score: 10, text: "Now You See Me: Now You Don't", user: "miri****", date: "2025.11.18. 11:47" },
            { score: 9, text: "재미있게 잘 봤습니다.", user: "naku****", date: "2025.11.18. 11:32" },
            { score: 7, text: "킬링타임용 같습니다.", user: "tkda****", date: "2025.11.18. 11:03" },
            { score: 1, text: "(의견 없음)", user: "rkvl****", date: "2025.11.18. 10:58" },
            { score: 8, text: "그럭저럭 잘 봤습니다 잘봤어요", user: "ckj0****", date: "2025.11.18. 10:03" },
            { score: 8, text: "영화 재미있게 잘봤습니다~", user: "lawc****", date: "2025.11.18. 09:44" },
            { score: 8, text: "마술은 신기하고 재밌었으나 1,2편을 안본 나도 기존캐를 하대하는게 불편했다", user: "bghh****", date: "2025.11.18. 09:40" },
            { score: 4, text: "원멤버들 오랜만에 봐서 반가워서 4점 나머지는 더 올려쳐 줄 수가 없....", user: "witj****", date: "2025.11.18. 09:04" },
            { score: 6, text: "킬링타임용으로 봤는데도 조금 아쉬운", user: "lsso****", date: "2025.11.18. 08:19" },
            { score: 10, text: "끝날 때 영화 속 사람들과 같이 박수 친 영화 다시 나우유씨미를 볼 수 있어 행복했습니다", user: "luck****", date: "2025.11.18. 08:12" },
            { score: 7, text: "그냥저냥 볼만한 영화 기대를크게안하고보세요", user: "rpak****", date: "2025.11.18. 08:00" },
            { score: 6, text: "전작을 안 봐서 비교는 못하겠지만 클리셰가 조금 있어도 오락영화로는 괜찮았다", user: "roea****", date: "2025.11.18. 04:39" },
            { score: 6, text: "1,2편과 전체적으로 흐름이 비슷함... 같은 그림이 반복되서인지 뭔가 좀 세련된 느낌은 아니었다.", user: "yuna****", date: "2025.11.18. 03:18" },
            { score: 7, text: "세대교체 안하면 죽는 병에 걸린 할리우드", user: "heji****", date: "2025.11.18. 02:50" },
            { score: 10, text: "재미있게 잘 봤습니다~", user: "alwn****", date: "2025.11.18. 02:40" },
            { score: 6, text: "짜잘짜잘하게 넣는것보단 임팩트 있는 마술씬 좀 더 챙기길", user: "shfo****", date: "2025.11.18. 02:16" },
            { score: 9, text: "역시 재밌네 시리즈 계속해서 재밌음", user: "sns1****", date: "2025.11.18. 00:12" },
            { score: 5, text: "스포일러가 포함된 감상평입니다.", user: "dbst****", date: "2025.11.17. 23:51" },
            { score: 10, text: "재밌었고 신기한 영화였어요!!", user: "kskm****", date: "2025.11.17. 22:58" },
            { score: 4, text: "올드하고 촌스러운 연출과 무빙. 어떻게 계속 속편이 나오는지 의문이다.", user: "jsjc****", date: "2025.11.17. 22:27" },
            { score: 4, text: "내가 뭐 잘 알지도 못하는 신삥이 데뷔 무대를 보러 간 것이 아니었는데...", user: "dhkd****", date: "2025.11.17. 22:19" },
            { score: 3, text: "재미나고 신선한 마술트릭 보는맛으로 보던 영화인데....왜 갑자기 경찰을 뚜까패세요...?", user: "tjfg****", date: "2025.11.17. 22:15" },
            { score: 3, text: "마술할 시간에 대신나온 어줍잖은 세대교체", user: "rmt9****", date: "2025.11.17. 22:09" },
            { score: 10, text: "나우유씨미 시리즈는 늘 봐도 유쾌하고 눈이 즐거운 영화네요", user: "agga****", date: "2025.11.17. 21:19" },
            { score: 8, text: "나우유씨미 잘봤습니다^^", user: "twic****", date: "2025.11.17. 20:42" },
            { score: 7, text: "매력적인 시리즈의 9년만에 부활... 화려한 트릭과 통쾌한 복수극", user: "wwwa****", date: "2025.11.17. 19:50" },
            { score: 7, text: "괜찮은 듯 아쉬운 듯 쏘쏘", user: "supe****", date: "2025.11.17. 19:47" },
            { score: 8, text: "나우유씨미 영화 재밌게 잘 봤어요", user: "minh****", date: "2025.11.17. 19:35" },
            { score: 2, text: "진짜 드럽게재미없네 공짜로 풀려도 안볼영화를 돈주고봤네 개아까워죽겟구만", user: "nan_****", date: "2025.11.17. 18:54" },
            { score: 2, text: "이게 진짜로 재밌다고...? 미치겄네... 댓글알바를 얼마나 산거야..", user: "jjim****", date: "2025.11.17. 18:35" },
            { score: 8, text: "볼 거리가 풍성해서 끝까지 재미있게 잘 봤어요. 특히 베로니카 역 로자먼드 파이크 존재감 있는 연기 인상적이었네요.", user: "xmel****", date: "2025.11.17. 18:26" },
            { score: 8, text: "영화 재미있게 잘 봤습니다", user: "wohw****", date: "2025.11.17. 18:06" },
            { score: 10, text: "꿀잼입니다 추천드려요", user: "lmhm****", date: "2025.11.17. 18:04" },
            { score: 8, text: "재미나요 볼만 합니다.", user: "jack****", date: "2025.11.17. 16:55" },
            { score: 6, text: "모두가 모인 걸 봤으니 그걸로 됐다.", user: "dolt****", date: "2025.11.17. 16:41" },
            { score: 3, text: "그냥 1에서 만족하자 그게 맞다", user: "unlu****", date: "2025.11.17. 15:50" },
            { score: 7, text: "포스터 4종+오티+스티+아카 다 챙김.", user: "maso****", date: "2025.11.17. 15:00" },
            { score: 6, text: "재미없어요 많이 별로예요", user: "junz****", date: "2025.11.17. 14:58" }
        ];

        document.addEventListener('DOMContentLoaded', () => {
            const tabs = document.querySelectorAll('[data-tab-target]');
            const tabContents = document.querySelectorAll('[data-tab-content]');

            tabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    const target = document.querySelector(tab.dataset.tabTarget);
                    
                    tabContents.forEach(tabContent => {
                        tabContent.classList.remove('active');
                    });
                    tabs.forEach(t => {
                        t.classList.remove('active');
                    });

                    tab.classList.add('active');
                    target.classList.add('active');
                });
            });

            const tableBody = document.getElementById('reviews-table-body');
            const sentimentFilter = document.getElementById('sentiment-filter');
            const searchInput = document.getElementById('search-input');
            const noResults = document.getElementById('no-results');

            function populateReviewsTable(reviews) {
                tableBody.innerHTML = '';
                if (reviews.length === 0) {
                    noResults.classList.remove('hidden');
                    return;
                }
                noResults.classList.add('hidden');

                reviews.forEach(review => {
                    let scoreColor = 'text-gray-700';
                    if (review.score >= 8) scoreColor = 'text-green-600 font-bold';
                    else if (review.score <= 5) scoreColor = 'text-red-600 font-bold';

                    const row = `
                        <tr class="hover:bg-gray-50">
                            <td class="px-4 py-3 whitespace-nowrap text-sm ${scoreColor}">
                                ${'★'.repeat(review.score)}${'☆'.repeat(10 - review.score)}
                                <span class="block text-xs">(${review.score}점)</span>
                            </td>
                            <td class="px-4 py-3 text-sm text-gray-800">${review.text}</td>
                            <td class="px-4 py-3 whitespace-nowrap text-sm text-gray-500">${review.user}</td>
                            <td class="px-4 py-3 whitespace-nowrap text-sm text-gray-500">${review.date}</td>
                        </tr>
                    `;
                    tableBody.innerHTML += row;
                });
            }

            function filterAndSearchReviews() {
                const filterValue = sentimentFilter.value;
                const searchTerm = searchInput.value.toLowerCase();

                const filteredReviews = allReviewsData.filter(review => {
                    const sentimentMatch = (filterValue === 'all') ||
                                           (filterValue === 'positive' && review.score >= 8) ||
                                           (filterValue === 'neutral' && review.score >= 6 && review.score <= 7) ||
                                           (filterValue === 'negative' && review.score <= 5);
                    
                    const searchMatch = review.text.toLowerCase().includes(searchTerm) ||
                                        review.user.toLowerCase().includes(searchTerm);

                    return sentimentMatch && searchMatch;
                });

                populateReviewsTable(filteredReviews);
            }

            sentimentFilter.addEventListener('change', filterAndSearchReviews);
            searchInput.addEventListener('input', filterAndSearchReviews);
            
            populateReviewsTable(allReviewsData);
            
            createSentimentChart();
            createRatingDistributionChart();
            createKeywordChart();
        });

        function createSentimentChart() {
            const ctx = document.getElementById('sentimentDoughnutChart').getContext('2d');
            new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: ['긍정 (8-10점)', '중립 (6-7점)', '부정 (1-5점)'],
                    datasets: [{
                        data: [20, 18, 12],
                        backgroundColor: ['#10b981', '#9ca3af', '#ef4444'],
                        borderColor: '#f8f9fa',
                        borderWidth: 2,
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'right',
                            labels: {
                                boxWidth: 12,
                                padding: 15,
                                font: {
                                    size: 12,
                                    family: 'Noto Sans KR'
                                }
                            }
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    let label = context.label || '';
                                    let value = context.raw || 0;
                                    let percentage = (value / 50 * 100).toFixed(1);
                                    return `${label}: ${value}명 (${percentage}%)`;
                                }
                            }
                        }
                    }
                }
            });
        }

        function createRatingDistributionChart() {
            const ctx = document.getElementById('ratingDistributionBarChart').getContext('2d');
            const ratingCounts = [0, 2, 2, 3, 3, 1, 10, 8, 3, 8, 10]; 
            allReviewsData.forEach(r => ratingCounts[r.score]++);

            new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['1점', '2점', '3점', '4점', '5점', '6점', '7점', '8점', '9점', '10점'],
                    datasets: [{
                        label: '리뷰 수',
                        data: ratingCounts.slice(1), 
                        backgroundColor: [
                            '#ef4444', '#ef4444', '#ef4444', '#ef4444', '#f87171',
                            '#9ca3af', '#9ca3af',
                            '#10b981', '#10b981', '#10b981'
                        ],
                        borderRadius: 4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return ` ${context.label}: ${context.raw}명`;
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: { display: true, text: '리뷰 수 (명)' }
                        },
                        x: {
                            title: { display: true, text: '별점' }
                        }
                    }
                }
            });
        }
        
        function createKeywordChart() {
            const ctx = document.getElementById('keywordBarChart').getContext('2d');
            new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['재미 (종합)', '킬링타임용', '전작 비교', '세대교체', '호스맨/캐릭터', '아쉬움'],
                    datasets: [{
                        label: '언급 빈도',
                        data: [12, 5, 5, 5, 5, 4],
                        backgroundColor: [
                            '#3b82f6', '#60a5fa', '#93c5fd', '#ef4444', '#3b82f6', '#9ca3af'
                        ],
                        borderRadius: 4
                    }]
                },
                options: {
                    indexAxis: 'y', 
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return ` ${context.label}: ${context.raw}회 언급`;
                                }
                            }
                        }
                    },
                    scales: {
                        x: {
                            beginAtZero: true,
                            title: { display: true, text: '언급 빈도 (회)' }
                        }
                    }
                }
            });
        }
    </script>
</body>
</html>
